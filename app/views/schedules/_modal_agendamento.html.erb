<div id="agendamento" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content animated fadeIn">
      <div class="modal-header">
        <h5 class="modal-title">Agendamento</h5>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <i class="fa fa-clock-o modal-icon"></i>        
      </div>
      <form class="form-horizontal" id="form_agendamento">
        <div class="modal-body no-padding">
          <div id="tabAgendamento" class="tabs-container">
            <ul class="nav nav-tabs">
              <li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#tab-dados"> Dados </a></li>
              <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#tab-timeline"> Timeline </a></li>              
            </ul>
            <div class="tab-content" style="margin-top: 10px">
              <div id="tab-dados" class="tab-pane active">
                <div class="panel-body" >
                  <div class="form-group row">
                    <div class="col-sm-6" >
                      <%= label_tag 'start', 'Inicio' %>
                      <%= datetime_field_tag :start, Time.now.strftime("%Y-%m-%d %hh:%mm"), class: 'form-control form-control' %>
                    </div>
                    <div class="col-sm-6" >
                      <%= label_tag 'end', 'Fim' %>
                      <%= datetime_field_tag :end, (Time.now + 1.hour).strftime("%Y-%m-%d"), class: 'form-control form-control' %>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-sm-12">
                      <%= label_tag 'Laboratório', nil %>
                      <%= select_tag 'laboratory_id', options_for_select(Laboratory.all.order(:name).collect {|p| [p.name, p.id]}), {:class => "custom-select-sm form-control", :data => {:placeholder => 'Selecione um professor'}, :include_blank => false} %>
                    </div>
                  </div>   
                  <div class="form-group row">
                    <div class="col-sm-12">
                      <%= label_tag 'Equipamento', nil %>
                      <%= select_tag 'equipament_id', options_for_select([]), {:class => "custom-select-sm form-control", :data => {:placeholder => 'Selecione um professor'}, :include_blank => true} %>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-sm-6">
                      <%= label_tag 'Tipo reserva', nil %>
                      <%= select_tag 'type_reservation_id', options_for_select(TypeReservation.all.order(:description).collect {|p| [p.description, p.id]}), {:class => "custom-select-sm form-control", :data => {:placeholder => 'Selecione um professor'}, :include_blank => false} %>
                    </div>
                    <div class="col-sm-6">
                      <%= label_tag 'Status', nil %>
                      <%= select_tag 'status', options_for_select([
                                                                  ['PENDENTE', 0],
                                                                  ['CONFIRMADO', 1],
                                                                  ['REJEITADO', 2]
                                                                ],0), {:class => "custom-select-sm form-control", :data => {:placeholder => 'Selecione um professor'}, :readOnly => true} %>
                    </div>
                  </div> 
                </div>
              </div>  
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" id="btnExcluirEvento">Cancelar</button>
          <button type="button" class="btn btn-primary" id="btnSalvarReagendamento" style="display: none;">Salvar</button>
          <%= submit_tag 'Salvar', :id => 'btnSalvarAgendamento', :class => 'btn btn-primary' %>
        </div>
      </form>
    </div>
  </div>
</div>
<script>
    function setValueInConfirmacao() {
        var value = $('#form_agendamento #confirmado_agendamento').val();
        var bool = value == 'true';
        $('#form_agendamento #confirmado_agendamento').val(!bool)

        if(!bool){
            $('#text-confirmacao').text('- Confirmado');
        }else{
            $('#text-confirmacao').text('- Não Confirmado');
        }
    }
    function setWhats(id) {
        var checkBox;
        var t=$('#telefone').val();
        var t2=$('#telefone2').val();
        if(id == 'telefone') {
            checkBox = document.getElementById('telefone_whats1');
            if(checkBox.checked){
              if(t) {
                
                window.open('https://api.whatsapp.com/send?phone=55' + (id == 'telefone' ? apenasNumeros($('#telefone').val()) : apenasNumeros($('#telefone2').val())), '_blank');
              }

            }else{
            var teste = '#tr-whats'+id;
            $(teste).closest('tr').remove();
          }

        }else if(id == 'telefone2'){
            checkBox = document.getElementById('telefone_whats2');

            if(checkBox.checked){
              if(t2) {
                
                window.open('https://api.whatsapp.com/send?phone=55' + (id == 'telefone' ? apenasNumeros($('#telefone').val()) : apenasNumeros($('#telefone2').val())), '_blank');
              }

            }else{
            var teste = '#tr-whats'+id;
            $(teste).closest('tr').remove();
          }
            
        }
    
        
    }
</script>

